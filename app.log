INFO:     Will watch for changes in these directories: ['C:\\Users\\ning\\Downloads\\trendmirror\\Trend-Mirror']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [11420] using WatchFiles
INFO:     Started server process [20268]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:11215 - "GET /trendmirror HTTP/1.1" 200 OK
INFO:     127.0.0.1:11246 - "GET /docs HTTP/1.1" 200 OK
INFO:     127.0.0.1:11246 - "GET /openapi.json HTTP/1.1" 200 OK
[2026-01-14 15:09:56] [INFO] --- (1) Entered Strategy Builder Subgraph ---
[2026-01-14 15:09:56] [INFO] Analyzing user input: '게임 데이터'
[2026-01-14 15:09:56] [INFO] Calling LLM to analyze user intent...
[2026-01-14 15:09:57] [INFO] Intent analysis complete. Parsed parameters: {"intent": "trendmirror", "slots": {"region": "Global", "period_days": 30, "channels": [], "domain": "게임 데이터", "search_query": "게임"}, "cache_key": "trendmirror_게임_데이터_Global_30"}
[2026-01-14 15:09:57] [INFO] --- Strategy Builder Subgraph Finished ---
[2026-01-14 15:09:57] [INFO] [Router] No cache hit. Routing to YouTube Processing Subgraph.
[2026-01-14 15:09:57] [INFO] --- (YT) Entered YouTube Processing Subgraph ---
[2026-01-14 15:09:57] [INFO] Step YT.1: Calling youtube_crawling_tool...
[2026-01-14 15:09:57] [INFO] Domain for extraction: '게임 데이터', Crawling Query: '게임' (from slots['search_query'])
[2026-01-14 15:09:57] [INFO] youtube_crawling_tool called with query='게임', days='30'
[2026-01-14 15:09:58] [INFO] Crawling tool returned: 유튜브 검색 결과가 다음 경로에 CSV 파일로 저장되었습니다: downloads/youtube_게임_20260114_30d_real_data.csv
[2026-01-14 15:09:58] [INFO] Extracted CSV path: downloads/youtube_게임_20260114_30d_real_data.csv
[2026-01-14 15:09:58] [INFO] Step YT.2: Calling run_keyword_extraction tool...
[2026-01-14 15:09:58] [INFO] --- (KE) Entered Keyword Extraction Subgraph ---
[2026-01-14 15:09:58] [INFO] Step KE.1: Loading data and domain from state...
[2026-01-14 15:09:58] [INFO] Successfully loaded 25 rows. Domain set to '게임 데이터'.
[2026-01-14 15:09:58] [INFO] Step KE.2: Starting domain-specific trend keyword extraction via LLM with batch_size=20...
  0%|          | 0/2 [00:00<?, ?it/s] 50%|#####     | 1/2 [00:07<00:07,  7.05s/it]100%|##########| 2/2 [00:09<00:00,  4.38s/it]100%|##########| 2/2 [00:09<00:00,  4.78s/it]
[2026-01-14 15:10:08] [INFO] Keyword extraction via LLM complete.
[2026-01-14 15:10:08] [INFO] Step KE.3: Saving results to new CSV file...
[2026-01-14 15:10:08] [INFO] Keyword-extracted data saved to 'downloads/youtube_게임_20260114_30d_real_data_with_keywords.csv'
[2026-01-14 15:10:08] [INFO] Keyword frequencies saved to 'downloads/youtube_게임_20260114_30d_real_data_keyword_frequencies.csv'
[2026-01-14 15:10:08] [INFO] Step KE.4: Syncing extracted keywords to Vector DB...
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\logging\__init__.py", line 1163, in emit
    stream.write(msg + self.terminator)
UnicodeEncodeError: 'cp949' codec can't encode character '\U0001f504' in position 29: illegal multibyte sequence
Call stack:
  File "<string>", line 1, in <module>
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\uvicorn\_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\uvicorn\server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\asyncio\base_events.py", line 678, in run_until_complete
    self.run_forever()
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\asyncio\base_events.py", line 645, in run_forever
    self._run_once()
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\asyncio\base_events.py", line 1999, in _run_once
    handle._run()
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\fastapi\applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\fastapi\routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\app\api\routes\chat.py", line 18, in chat_endpoint
    result = agent_service.run_agent(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\app\service\agent_service.py", line 34, in run_agent
    result = super_graph.invoke(initial_state, config=config)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\main.py", line 3068, in invoke
    for chunk in self.stream(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\main.py", line 2643, in stream
    for _ in runner.tick(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\_runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\_retry.py", line 42, in run_with_retry
    return task.proc.invoke(task.input, config)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\_internal\_runnable.py", line 656, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\main.py", line 3068, in invoke
    for chunk in self.stream(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\main.py", line 2643, in stream
    for _ in runner.tick(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\_runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\_retry.py", line 42, in run_with_retry
    return task.proc.invoke(task.input, config)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\_internal\_runnable.py", line 656, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\_internal\_runnable.py", line 400, in invoke
    ret = self.func(*args, **kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\app\agents\subgraphs\youtube_process.py", line 51, in youtube_process_node
    keyword_result_str = run_keyword_extraction.invoke({"csv_path": csv_path, "slots": state.get("slots", {}), "config": config})
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langchain_core\tools\base.py", line 632, in invoke
    return self.run(tool_input, **kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langchain_core\tools\base.py", line 953, in run
    response = context.run(self._run, *tool_args, **tool_kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langchain_core\tools\structured.py", line 94, in _run
    return self.func(*args, **kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\app\agents\tools.py", line 181, in run_keyword_extraction
    final_state = keyword_extraction_graph.invoke(initial_state)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\main.py", line 3068, in invoke
    for chunk in self.stream(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\main.py", line 2643, in stream
    for _ in runner.tick(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\_runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\_retry.py", line 42, in run_with_retry
    return task.proc.invoke(task.input, config)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\_internal\_runnable.py", line 656, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\_internal\_runnable.py", line 400, in invoke
    ret = self.func(*args, **kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\app\agents\subgraphs\keyword_extract.py", line 138, in keyword_extraction_node
    sync_service.sync_csv_to_db(freq_output_path)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\app\service\sync_service.py", line 52, in sync_csv_to_db
    logger.info(f"\U0001f504 [{sns_name} | {category}] 검증 완료. 데이터 분석 시작 (기준일: {file_date_str})")
Message: '\U0001f504 [youtube | 게임] 검증 완료. 데이터 분석 시작 (기준일: 20260114)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\logging\__init__.py", line 1163, in emit
    stream.write(msg + self.terminator)
UnicodeEncodeError: 'cp949' codec can't encode character '\u2705' in position 29: illegal multibyte sequence
Call stack:
  File "<string>", line 1, in <module>
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\uvicorn\_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\uvicorn\server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\asyncio\base_events.py", line 678, in run_until_complete
    self.run_forever()
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\asyncio\base_events.py", line 645, in run_forever
    self._run_once()
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\asyncio\base_events.py", line 1999, in _run_once
    handle._run()
  File "C:\Users\ning\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\fastapi\applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\fastapi\routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\app\api\routes\chat.py", line 18, in chat_endpoint
    result = agent_service.run_agent(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\app\service\agent_service.py", line 34, in run_agent
    result = super_graph.invoke(initial_state, config=config)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\main.py", line 3068, in invoke
    for chunk in self.stream(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\main.py", line 2643, in stream
    for _ in runner.tick(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\_runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\_retry.py", line 42, in run_with_retry
    return task.proc.invoke(task.input, config)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\_internal\_runnable.py", line 656, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\main.py", line 3068, in invoke
    for chunk in self.stream(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\main.py", line 2643, in stream
    for _ in runner.tick(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\_runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\_retry.py", line 42, in run_with_retry
    return task.proc.invoke(task.input, config)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\_internal\_runnable.py", line 656, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\_internal\_runnable.py", line 400, in invoke
    ret = self.func(*args, **kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\app\agents\subgraphs\youtube_process.py", line 51, in youtube_process_node
    keyword_result_str = run_keyword_extraction.invoke({"csv_path": csv_path, "slots": state.get("slots", {}), "config": config})
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langchain_core\tools\base.py", line 632, in invoke
    return self.run(tool_input, **kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langchain_core\tools\base.py", line 953, in run
    response = context.run(self._run, *tool_args, **tool_kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langchain_core\tools\structured.py", line 94, in _run
    return self.func(*args, **kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\app\agents\tools.py", line 181, in run_keyword_extraction
    final_state = keyword_extraction_graph.invoke(initial_state)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\main.py", line 3068, in invoke
    for chunk in self.stream(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\main.py", line 2643, in stream
    for _ in runner.tick(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\_runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\pregel\_retry.py", line 42, in run_with_retry
    return task.proc.invoke(task.input, config)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\_internal\_runnable.py", line 656, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\.venv\Lib\site-packages\langgraph\_internal\_runnable.py", line 400, in invoke
    ret = self.func(*args, **kwargs)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\app\agents\subgraphs\keyword_extract.py", line 138, in keyword_extraction_node
    sync_service.sync_csv_to_db(freq_output_path)
  File "C:\Users\ning\Downloads\trendmirror\Trend-Mirror\app\service\sync_service.py", line 115, in sync_csv_to_db
    logger.info(f"\u2705 동기화 완료: {len(ids)}개의 유효 키워드가 DB에 저장되었습니다.")
Message: '\u2705 동기화 완료: 2개의 유효 키워드가 DB에 저장되었습니다.'
Arguments: ()
[2026-01-14 15:10:08] [INFO] Analysis complete! Saved to 'downloads/youtube_게임_20260114_30d_real_data_with_keywords.csv'
[2026-01-14 15:10:08] [INFO] --- Keyword Extraction Subgraph Finished ---
[2026-01-14 15:10:08] [INFO] Keyword extraction tool returned: {"status": "success", "input_path": "downloads/youtube_게임_20260114_30d_real_data.csv", "output_path": "downloads/youtube_게임_20260114_30d_real_data_with_keywords.csv"}
[2026-01-14 15:10:08] [INFO] --- YouTube Processing Subgraph Finished ---
[2026-01-14 15:10:08] [INFO] --- (4) Entered Strategy Generation Subgraph (DB Query) ---
[2026-01-14 15:10:08] [INFO] Report generation for Category: '게임'
[2026-01-14 15:10:08] [INFO] Retrieved top 5 keywords for '게임' from DB: ['게임', '로블록스']
[2026-01-14 15:10:08] [INFO] Using retrieval query for detailed search: '게임의 주요 트렌드 키워드는 게임, 로블록스입니다. 이 키워드들과 관련된 상세 영상 내용을 요약해주세요.'
[2026-01-14 15:10:09] [INFO] Retrieved 10 detailed documents from Vector DB using n_results=10.
[2026-01-14 15:10:09] [INFO] Calling LLM to write the final report...
[2026-01-14 15:10:16] [INFO] LLM call complete. Report content generated.
[2026-01-14 15:10:16] [INFO] generate_report_pdf called with filename='report_게임 데이터_20260114.pdf'
[2026-01-14 15:10:16] [INFO] Report saved at: reports/report_게임 데이터_20260114.pdf
[2026-01-14 15:10:16] [INFO] --- Strategy Generation Subgraph Finished ---
INFO:     127.0.0.1:11264 - "POST /api/v1/chat HTTP/1.1" 200 OK
